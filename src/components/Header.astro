---
import { siteConfig } from '../config/site.js';
import Button from './Button.astro';

const navItems = [
  { label: 'Home', href: '/' },
  { 
    label: 'About Us', 
    href: '/about',
    dropdown: [
      { label: 'About Us', href: '/about' },
      { label: 'History', href: '/history' },
      { label: 'Our Experience', href: '/experience' },
      { label: 'The Club', href: '/club' },
    ]
  },
  { 
    label: 'Classes', 
    href: '/classes',
    dropdown: [
      { label: 'All Classes', href: '/classes' },
      { label: 'Ju Jutsu', href: '/ju-jutsu' },
      { label: 'Aikido', href: '/aikido-perth' },
      { label: 'Tai Chi', href: '/tai-chi' },
      { label: 'Children\'s Training', href: '/childrens-training' },
      { label: 'Self Defence', href: '/self-defence' },
      { label: 'Self Protection', href: '/self-protection' },
      { label: 'Sword Training', href: '/sword-training' },
      { label: 'Personal Training', href: '/personal-training' },
      { label: 'Corporate Training', href: '/corporate-training' },
    ]
  },
  { label: 'Membership', href: '/membership' },
  { label: 'Events', href: '/events' },
  { label: 'Timetable', href: '/timetable' },
  { label: 'Contact', href: '/contact' },
];
---

<div class="navbar bg-base-100 shadow-lg sticky top-0 z-50">
  <!-- Top contact bar -->
  <div class="bg-primary text-primary-content py-2 absolute -top-10 left-0 right-0">
    <div class="container mx-auto px-4 flex justify-between text-sm">
      <div class="flex gap-4">
        <a href={`tel:${siteConfig.contact.phone}`} class="hover:underline">{siteConfig.contact.phone}</a>
        <a href={`mailto:${siteConfig.contact.email}`} class="hover:underline">{siteConfig.contact.email}</a>
      </div>
      <div class="flex gap-4">
        <a href="/become-a-member" class="hover:underline">Become a Member</a>
        <a href="#" class="hover:underline">Member Login</a>
      </div>
    </div>
  </div>

  <!-- Main navbar -->
  <div class="navbar-start">
    <div class="dropdown">
      <div tabindex="0" role="button" class="btn btn-ghost lg:hidden">
        <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
        </svg>
      </div>
      <ul tabindex="0" class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow-lg">
        {navItems.map((item) => (
          <li>
            {item.dropdown ? (
              <details>
                <summary>{item.label}</summary>
                <ul class="p-2">
                  {item.dropdown.map((dropdownItem) => (
                    <li><a href={dropdownItem.href}>{dropdownItem.label}</a></li>
                  ))}
                </ul>
              </details>
            ) : (
              <a href={item.href}>{item.label}</a>
            )}
          </li>
        ))}
      </ul>
    </div>
    <a href="/" class="btn btn-ghost text-xl">
      <img src="/images/logo.png" alt="Jan de Jong Martial Arts" class="h-8">
    </a>
  </div>
  
  <div class="navbar-center hidden lg:flex">
    <ul class="menu menu-horizontal px-1">
      {navItems.map((item) => (
        <li>
          {item.dropdown ? (
            <details>
              <summary class="hover:bg-primary hover:text-primary-content">{item.label}</summary>
              <ul class="bg-base-100 rounded-box shadow-lg z-[1] w-52">
                {item.dropdown.map((dropdownItem) => (
                  <li>
                    <a href={dropdownItem.href} class="hover:bg-primary hover:text-primary-content">
                      {dropdownItem.label}
                    </a>
                  </li>
                ))}
              </ul>
            </details>
          ) : (
            <a href={item.href} class="hover:bg-primary hover:text-primary-content">{item.label}</a>
          )}
        </li>
      ))}
    </ul>
  </div>
  
  <div class="navbar-end">
    <Button href="/free-trial" type="primary" size="sm" class="hidden md:inline-flex">
      FREE TRIAL
    </Button>
  </div>
</div>